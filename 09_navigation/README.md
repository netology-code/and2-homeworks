# Домашнее задание к занятию «3.2. Организация навигации (перемещение между Activity)»

В качестве результата пришлите ссылку на ваш Pull Request в личном кабинете студента на сайте [netology.ru](https://netology.ru).

**Важно**: ознакомьтесь со ссылками на главной странице [репозитория с домашними заданиями](../README.md).

**Важно**: если у вас что-то не получилось, оформите Issue согласно [правилам](../report-requirements.md).

## Как сдавать задачи

1. Откройте ваш проект из предыдущего ДЗ.
1. Сделайте необходимые коммиты.
1. Сделайте push. Убедитесь, что ваш код появился на GitHub.
1. Ссылку на ваш проект отправьте в личном кабинете на сайте [netology.ru](https://netology.ru).
1. Задачи, отмеченные как необязательные, можно не сдавать. Это не повлияет на получение зачёта. В этом ДЗ все задачи обязательные.

## Задача. Editing

### Задача

На лекции мы создали пост в отдельной `Activity`. Вам нужно добавить функцию редактирования, тоже не в `MainActivity`. Вы можете сделать это по-разному:
1. Совместить создание и редактирование в одной `Activity`, но тогда нужно будет отличать создание от редактирования.
1. Создать отдельную `Activity` для редактирования.

Опубликуйте изменения в вашем проекте на GitHub. Убедитесь, что apk собирается с помощью GitHub Actions и при установке в эмуляторе приложение работает корректно.

В качестве результата пришлите ссылку на ваш GitHub-проект в личном кабинете студента на сайте [netology.ru](https://netology.ru).

## Задача. Video

### Задача

На Intent в Android строится значительная часть взаимодействия между приложениями. Мы можем задействовать другие приложения для отображения нужного нам контента или выполнения действий и т. д.

Добавим в наше приложение возможность открытия видео, если оно будет добавлено к посту. Для этого в классе `Post` создадим необязательное поле `video`, в которое пользователь может вставить ссылку на RUTUBE-видео.

При наличии у поста видео, можно показывать следующие элементы:

![](pic/video.png)

Вам нужно добавить в разметку поста отдельный блок, который будет показываться при наличии ссылки на видео. При нажатии на этот блок запускать неявный Intent со ссылкой, чтобы система его обработала и отобразила пользователю видео в браузере или в приложении RUTUBE (при наличии).

При этом не нужно показывать превью для видео, достаточно вместо обложки поставить произвольную картинку-заглушку и добавить на нее сверху кнопку Play.

<details>
<summary>Советы по реализации</summary>

1. Изучите самые распространённые Intent [по ссылке](https://developer.android.com/guide/components/intents-common) и выберите нужный для открытия ссылки.
1. Перехватывайте все клики на кнопке и на обложке: пользователь не обязательно должен попадать в саму кнопку.
1. Для открытия внешнего приложения достаточно:
    * URL вида: `"https://rutube.ru/video/6550a91e7e523f9503bed47e4c46d0cb"`;
    * преобразовать этот URL в `Uri`: `Intent(Intent.ACTION_VIEW, "https://rutube.ru/video/6550a91e7e523f9503bed47e4c46d0cb".toUri())`;
    * стартовать Activity с созданным Intent.
</details>

<details>
<summary>Примечания</summary>

Если вас заинтересовала работа с внешними Intent в Android, вам могут быть полезны методы [Intent.resolveActivity](https://developer.android.com/reference/android/content/Intent#resolveActivity(android.content.pm.PackageManager)) и [PackageManager.queryIntentActivities](https://developer.android.com/reference/android/content/pm/PackageManager#queryIntentActivities(android.content.Intent,%20int)).
Они позволяют получить данные о том, какая активити будет запущена после отправки неявного Intent в метод `startActivity`. Так можно получить список приложений, которые обрабатывают Intent, отправляемые из вашего приложения.
   
Для работы этих методов на Android 11 и выше необходимо в `AndroidManifest.xml` добавить параметр queries, чтобы указать системе, что вы будете делать подобные запросы, и перечислить их параметры.
Для просмотра "активитей", которые обрабатывают `Intent.ACTION_VIEW`, нужно прописать:

```
<manifest>
    <application>
    ...
    </application>

    <queries>
        <intent>
            <action android:name="android.intent.action.VIEW" />
            <data android:scheme="*" />
        </intent>
    </queries>
</manifest>
```
   
С помощью этих методов можно увидеть, какое приложение и какая активити в нём обработает ваш Intent.
</details>

Опубликуйте изменения в вашем проекте на GitHub. Убедитесь, что apk собирается с помощью GitHub Actions и при установке в эмуляторе приложение работает корректно.

В качестве результата пришлите ссылку на ваш GitHub-проект в личном кабинете студента на сайте [netology.ru](https://netology.ru).
